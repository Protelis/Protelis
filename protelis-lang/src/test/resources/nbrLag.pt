import protelis:coord:spreading
import java.lang.Double.POSITIVE_INFINITY
let res =
    alignedMap(
        nbr([["foo", "bar"], ["bar", "foo"]]),
        (key, filter) -> { true },
        (key, filter) -> { minHood(nbrLag()) },
        POSITIVE_INFINITY
    );
minHood(self.nbrLag())
    + minHood(nbrLag())
    + if (res == POSITIVE_INFINITY) { POSITIVE_INFINITY }
      else { res.get(0).get(1) + res.get(1).get(1) }